<IfModule mod_ssl.c>

<VirtualHost *:443>
        ServerName api.example.com
        ServerAdmin support@example.com

        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/ssl-cert-snakeoil.pem
	#SSLCertificateChainFile /etc/apache2/ssl.crt/server-ca.crt
        SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key

        DocumentRoot /var/www/
        <Directory />
                Options None
                AllowOverride None
                Order allow,deny
                Deny from all
        </Directory>

        Alias /wsapi/decrypt		/usr/share/yubikey-ksm/ykksm-decrypt.php

        <Directory /usr/share/yubikey-ksm/>
                Options None
                AllowOverride None
                Order allow,deny
                Allow from all
		<IfModule mod_php5.c>
			  php_value include_path ".:/etc/ykksm:/usr/share/yubikey-ksm"
		</IfModule>
        </Directory>

        ErrorLog /var/log/apache2/yubikey-ksm-ssl-error.log
        LogLevel warn

        CustomLog /var/log/apache2/yubikey-ksm-ssl-access.log "%h %l %u %t \"%r\" %>s %b %D \"%{Referer}i\" \"%{User-Agent}i\""
        ServerSignature On
</VirtualHost>

</IfModule>
