#summary Import Keys To Yubikey KSM
#labels Featured,Phase-Deploy

= Import Keys To Yubikey KSM =

To import keys into the YK-KSM database from text files in the
KeyProvisioningFormat format, you can use the tool ykksm-import.pl.
The tool reads the data on standard input, and will import the data to
the database.  On any error, execution is aborted, so be careful about
partial imports leaving the database in an intermediate state.

For example, to import the file generated by the GenerateKeys
document:

{{{
lyra:~# ~/yubikey-ksm/ykksm-import.pl --verbose < ~/keys.txt 
Verification output:
[GNUPG:] ENC_TO 67A657EDFAFE9F53 16 0
[GNUPG:] GOOD_PASSPHRASE
gpg: encrypted with 2048-bit ELG-E key, ID FAFE9F53, created 2009-02-16
      "YubiKey KSM Test Key"
[GNUPG:] BEGIN_DECRYPTION
[GNUPG:] PLAINTEXT 62 1235512300 
gpg: Signature made Tue 24 Feb 2009 10:51:40 PM CET using DSA key ID 1D2F473E
[GNUPG:] SIG_ID sJa1tb5P/ditVHTYK7+Tg2Sl9X8 2009-02-24 1235512300
[GNUPG:] GOODSIG E1D7ECB41D2F473E YubiKey KSM Test Key
gpg: Good signature from "YubiKey KSM Test Key"
[GNUPG:] VALIDSIG E8E40900E31C8E4E9856D531E1D7ECB41D2F473E 2009-02-24 1235512300 0 4 0 17 2 00 E8E40900E31C8E4E9856D531E1D7ECB41D2F473E
[GNUPG:] TRUST_ULTIMATE
[GNUPG:] DECRYPTION_OKAY
[GNUPG:] GOODMDC
[GNUPG:] END_DECRYPTION
encrypted to: 67A657EDFAFE9F53
signed by: E8E40900E31C8E4E9856D531E1D7ECB41D2F473E
line: 1,cccccccccccb,b871d16eed0a,6f063a9e4092f0b1324bf67a566a1b42,1594528a02fd,2009-02-24T22:51:40,,0
	serialnr 1 publicName cccccccccccb internalName b871d16eed0a aesKey 6f063a9e4092f0b1324bf67a566a1b42 lockCode 1594528a02fd created 2009-02-24T22:51:40 accessed  eol
line: 2,cccccccccccd,6881527b8d79,272cf76bb1448d7caa231271e89cc535,d34dc513bd29,2009-02-24T22:51:40,,0
	serialnr 2 publicName cccccccccccd internalName 6881527b8d79 aesKey 272cf76bb1448d7caa231271e89cc535 lockCode d34dc513bd29 created 2009-02-24T22:51:40 accessed  eol
line: 3,ccccccccccce,77197a0911f1,d39c8783158f314feee5d7bbc03c9efe,ab6efa36450f,2009-02-24T22:51:40,,0
	serialnr 3 publicName ccccccccccce internalName 77197a0911f1 aesKey d39c8783158f314feee5d7bbc03c9efe lockCode ab6efa36450f created 2009-02-24T22:51:40 accessed  eol
line: 4,cccccccccccf,1413b822d569,3e911521acebbb0c8e003977826f0a86,3b63234cf853,2009-02-24T22:51:40,,0
	serialnr 4 publicName cccccccccccf internalName 1413b822d569 aesKey 3e911521acebbb0c8e003977826f0a86 lockCode 3b63234cf853 created 2009-02-24T22:51:40 accessed  eol
line: 5,cccccccccccg,8a7817bffc76,c6f3441d55aae78c576a218aad383122,309a6aadf518,2009-02-24T22:51:40,,0
	serialnr 5 publicName cccccccccccg internalName 8a7817bffc76 aesKey c6f3441d55aae78c576a218aad383122 lockCode 309a6aadf518 created 2009-02-24T22:51:40 accessed  eol

lyra:~# 
}}}

When importing large data sets it is recommended to avoid the
--verbose flag to reduce noise.
