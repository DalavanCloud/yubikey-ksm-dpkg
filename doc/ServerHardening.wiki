#summary Server Hardening
#labels Featured,Phase-Deploy

= Server Hardening =

While the defaults should be secure, there are some simple
administrative actions that will increase your overall security.  None
of these steps are required, but we encourage you to read this
document to see if the enhancements are relevant for your environment.

== Tighten PHP configuration ==

Tighten the security of the PHP installation by creating a file
/etc/php5/conf.d/harden.ini with the following content:

{{{
user@host:~$ sudo sh -c 'cat > /etc/php5/conf.d/harden.ini'
display_errors = Off
log_errors = On
user@host:~$ 
}}}

== Tighten Apache configuration ==

Tighten the security of the Apache installation by making sure
directory listings are disabled globally.  Edit
/etc/apache2/conf.d/security and make sure the following is
uncommented:

{{{
<Directory />
	AllowOverride None
	Order Deny,Allow
	Deny from all
</Directory>
}}}

== Database encryption ==

The database contains sensitive information.  If someone is able to
access your machine physically, they may shut it off and steal it with
the goal of reading out the sensitive information.  By encrypting the
disk, you can prevent this.  Note that this does not protect against
an attacker who has physical access to your server and sufficient time
to read out the data from the already running system.

Full disk encryption will give you the highest protection, but
requires that you can enter the disk encryption password on each
power-up.  This can be unpractical when your hosting environment is
remote.

Partial disk encryption allows the operating system to start up, and
enable you to login to the machine remotely to enter the disk
encryption password.  This is less secure than full disk encryption,
because an attacker could physically disconnect your machine, modify
the operating system to send a copy of the password to the attacker,
but may be sufficient if you keep good track of when your machine is
not working properly.

To use partial disk encryption for the database content, we suggest
you install the operating system as normal but create another file
system on an encrypted volume.  If you need swap space, be sure to
only put the swap on the encrypted volume too.  Make sure that the
database does not start up automatically on boot, and also make sure
that the system does not attempt to mount your encrypted partition
automatically.

== Intrusion detection ==

To make some attacks discussed in the previous section harder, make
sure that your system has a hardware intrusion detection system and
that your software is notified when it is triggered.  When the
intrusion detection is triggered, you should stop the database and
unmount the encrypted volume and send out a signal to your
administrators.
